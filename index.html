<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>bookmarks</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #fff;
            /* Plain white background */
            color: #374151;
            /* Slightly softer dark gray for text */
            font-weight: 300;
            /* Lighter font weight for a softer feel */
        }

        .bookmark-link {
            @apply text-blue-600 hover:text-blue-700 hover:underline;
            font-weight: 400;
            /* Normal weight for links to make them readable */
        }

        .bookmark-category {
            border: 1px solid #e5e7eb;
            /* Very light border for categories */
        }

        /* Loading and error message styling */
        #message-area {
            @apply text-center text-gray-400 my-10 text-sm;
        }

        .header-title {
            letter-spacing: 0.2em;
            /* Spacing for "b o o k m a r k s" */
            font-weight: 400;
            /* Slightly bolder for the main title */
        }
    </style>
</head>

<body class="antialiased">

    <div class="container mx-auto px-4 py-10 sm:py-16 max-w-2xl">
        <header class="mb-10 sm:mb-14 text-center">
            <h1 class="text-2xl sm:text-3xl font-medium text-gray-700 header-title">b o o k m a r k s</h1>
        </header>

        <section id="bookmarks-section">
            <div id="message-area">Loading...</div>
        </section>

        <footer class="text-center mt-16 py-6">
            <p class="text-xs text-gray-400">&copy; <span id="currentYear"></span></p>
        </footer>

    </div>

    <script>
        // Set current year in footer
        document.getElementById('currentYear').textContent = new Date().getFullYear();

        // Function to fetch and display bookmarks
        async function loadAndDisplayBookmarks() {
            const bookmarksSection = document.getElementById('bookmarks-section');
            let messageArea = document.getElementById('message-area'); // Use let to reassign if needed

            try {
                // Attempt to fetch the bookmarks.json file
                const response = await fetch('bookmarks.json');
                if (!response.ok) {
                    // Handle HTTP errors like 404
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }
                const data = await response.json();

                // Clear loading message
                if (messageArea) messageArea.remove();

                if (data && data.categories && data.categories.length > 0) {
                    data.categories.forEach(category => {
                        // Create category container
                        const categoryDiv = document.createElement('div');
                        categoryDiv.className = 'mb-6 p-4 rounded-md bookmark-category';

                        // Create category title
                        const categoryTitle = document.createElement('h2');
                        categoryTitle.className = 'text-lg font-medium text-gray-600 mb-3';
                        categoryTitle.textContent = category.name;
                        categoryDiv.appendChild(categoryTitle);

                        // Create list for bookmarks
                        const bookmarkList = document.createElement('ul');
                        bookmarkList.className = 'space-y-2';

                        if (category.bookmarks && category.bookmarks.length > 0) {
                            category.bookmarks.forEach(bookmark => {
                                // Create list item
                                const listItem = document.createElement('li');
                                listItem.className = 'ml-2 py-1';

                                // Create link
                                const link = document.createElement('a');
                                link.href = bookmark.url;
                                link.textContent = bookmark.title;
                                link.target = '_blank';
                                link.rel = 'noopener noreferrer';
                                link.className = 'bookmark-link text-sm';
                                listItem.appendChild(link);

                                // Create description (optional and minimal)
                                if (bookmark.description) {
                                    const description = document.createElement('p');
                                    description.className = 'text-xs text-gray-400 mt-0.5 ml-px';
                                    description.textContent = bookmark.description;
                                    listItem.appendChild(description);
                                }
                                bookmarkList.appendChild(listItem);
                            });
                        } else {
                            const noBookmarksMessage = document.createElement('p');
                            noBookmarksMessage.className = 'text-xs text-gray-400 ml-2';
                            noBookmarksMessage.textContent = 'No bookmarks here yet.';
                            bookmarkList.appendChild(noBookmarksMessage);
                        }
                        categoryDiv.appendChild(bookmarkList);
                        bookmarksSection.appendChild(categoryDiv);
                    });
                } else {
                    // Ensure message area is available if needed for "no categories" message
                    messageArea = document.getElementById('message-area'); // Re-check if it was removed
                    if (!messageArea) {
                        messageArea = document.createElement('div');
                        messageArea.id = 'message-area';
                        bookmarksSection.appendChild(messageArea);
                    }
                    messageArea.textContent = 'No categories found in bookmarks.json.';
                    messageArea.className = 'text-center text-gray-400 my-10 text-sm';
                }

            } catch (error) {
                console.error('Error loading bookmarks:', error);
                // Ensure message area is available for error message
                messageArea = document.getElementById('message-area'); // Re-check if it was removed
                if (!messageArea) {
                    messageArea = document.createElement('div');
                    messageArea.id = 'message-area';
                    bookmarksSection.appendChild(messageArea);
                }
                messageArea.textContent = 'Could not load bookmarks. Make sure bookmarks.json exists and is valid.';
                messageArea.className = 'text-center text-red-500 my-10 text-sm'; // Style as error
            }
        }

        // Load bookmarks when the page content is loaded
        document.addEventListener('DOMContentLoaded', loadAndDisplayBookmarks);
    </script>

</body>

</html>