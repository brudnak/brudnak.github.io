<!DOCTYPE html>
<html lang="en" class="">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>links</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Light Mode (Default) - Gemini Inspired */
            --bg-color: #ffffff;
            --text-color: #3c4043;
            --text-color-light: #5f6368;
            --header-text-color: #202124;
            --link-color: #1a73e8;
            --link-hover-color: #174ea6;
            --border-color: #dadce0;
            --category-bg-color: #f8f9fa;
            --toggle-bg: #e8eaed;
            --toggle-fg: #5f6368;
            --toggle-text-color: var(--text-color-light);
            /* Subtle glow for light mode - very light, almost white-blue */
            --glow-color: #e3f2fd;
            /* A very pale blue */


            /* Transition for smooth theme changes */
            --theme-transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
        }

        html.dark {
            /* Dark Mode - Gemini Inspired */
            --bg-color: #202124;
            --text-color: #e8eaed;
            --text-color-light: #9aa0a6;
            --header-text-color: #f1f3f4;
            --link-color: #8ab4f8;
            --link-hover-color: #9ec5fc;
            --border-color: #5f6368;
            --category-bg-color: #2d2e30;
            --toggle-bg: #3c4043;
            --toggle-fg: #e8eaed;
            --toggle-text-color: var(--text-color);
            /* Soft neo blue glow for dark mode */
            --glow-color: #58a6ff;
            /* A soft, vibrant blue */
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            font-weight: 300;
            transition: var(--theme-transition);
        }

        .bookmark-link {
            color: var(--link-color);
            font-weight: 400;
            transition: color 0.2s ease;
        }

        .bookmark-link:hover {
            color: var(--link-hover-color);
            text-decoration: underline;
        }

        .bookmark-category {
            border: 1px solid var(--border-color);
            background-color: var(--category-bg-color);
            transition: var(--theme-transition);
        }

        #message-area {
            @apply text-center my-10 text-sm;
            color: var(--text-color-light);
            transition: var(--theme-transition);
        }

        .header-title {
            letter-spacing: 0.2em;
            font-weight: 400;
            color: var(--header-text-color);
            transition: var(--theme-transition);
        }

        .footer-text {
            color: var(--text-color-light);
            transition: var(--theme-transition);
        }

        /* Theme Toggle Styles */
        .theme-toggle {
            @apply fixed top-4 right-4 p-2 rounded-md cursor-pointer z-50 flex items-center justify-center;
            background-color: var(--toggle-bg);
            border: 1px solid var(--border-color);
            transition: var(--theme-transition), background-color 0.3s ease, border-color 0.3s ease, transform 0.2s ease;
            font-size: 0.875rem;
            /* Slightly smaller text */
            color: var(--toggle-text-color);
            padding-left: 0.75rem;
            /* Adjust padding for text */
            padding-right: 0.75rem;
            line-height: 1.25rem;
        }

        .theme-toggle:hover {
            transform: scale(1.05);
        }

        .theme-toggle-text {
            /* Subtle glow effect */
            text-shadow: 0 0 0.35rem var(--glow-color), 0 0 0.5rem var(--glow-color);
            /* Slightly enhanced glow */
        }

        /* By default (light mode), show "dark theme" text */
        .theme-toggle .light-theme-text-target {
            display: none;
        }

        .theme-toggle .dark-theme-text-target {
            display: inline;
        }

        /* In dark mode, show "light theme" text */
        html.dark .theme-toggle .dark-theme-text-target {
            display: none;
        }

        html.dark .theme-toggle .light-theme-text-target {
            display: inline;
        }
    </style>

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
</head>

<body class="antialiased">

    <button id="theme-toggle-button" class="theme-toggle" title="Toggle theme">
        <span class="dark-theme-text-target theme-toggle-text">dark theme</span>
        <span class="light-theme-text-target theme-toggle-text">light theme</span>
    </button>

    <div class="container mx-auto px-4 py-10 sm:py-16 max-w-2xl">

        <header class="mb-10 sm:mb-14 text-center">
            <h1 class="text-2xl sm:text-3xl font-medium header-title">l i n k s</h1>
        </header>

        <section id="bookmarks-section">
            <div id="message-area">Loading...</div>
        </section>

        <footer class="text-center mt-16 py-6">
            <p class="text-xs footer-text">&copy; <span id="currentYear"></span></p>
        </footer>
    </div>

    <script>
        // Theme toggle logic
        const themeToggleButton = document.getElementById('theme-toggle-button');
        const htmlElement = document.documentElement;
        // No need to query for individual text spans if CSS handles display

        // Function to apply theme based on preference or system setting
        function applyTheme(theme) {
            if (theme === 'dark') {
                htmlElement.classList.add('dark');
                themeToggleButton.title = "Switch to light theme"; // Update title
            } else {
                htmlElement.classList.remove('dark');
                themeToggleButton.title = "Switch to dark theme"; // Update title
            }
        }

        // Check for saved theme in localStorage or use system preference
        let currentTheme = localStorage.getItem('theme');
        if (!currentTheme) {
            currentTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
        }
        applyTheme(currentTheme); // Apply initial theme

        themeToggleButton.addEventListener('click', () => {
            const newTheme = htmlElement.classList.contains('dark') ? 'light' : 'dark';
            applyTheme(newTheme);
            localStorage.setItem('theme', newTheme);
        });

        // Set current year in footer
        document.getElementById('currentYear').textContent = new Date().getFullYear();

        // Function to fetch and display links (formerly bookmarks)
        async function loadAndDisplayBookmarks() {
            const bookmarksSection = document.getElementById('bookmarks-section');
            let messageArea = document.getElementById('message-area');

            try {
                const response = await fetch('bookmarks.json'); // Ensure this is the correct filename
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }
                const data = await response.json();

                if (messageArea) messageArea.remove();

                if (data && data.categories && data.categories.length > 0) {
                    data.categories.forEach(category => {
                        const categoryDiv = document.createElement('div');
                        categoryDiv.className = 'mb-6 p-4 rounded-md bookmark-category';

                        const categoryTitle = document.createElement('h2');
                        categoryTitle.className = 'text-lg font-semibold mb-3';
                        categoryTitle.style.color = 'var(--header-text-color)';
                        categoryTitle.style.transition = 'var(--theme-transition)';
                        categoryTitle.textContent = category.name;
                        categoryDiv.appendChild(categoryTitle);

                        const bookmarkList = document.createElement('ul');
                        bookmarkList.className = 'space-y-2';

                        if (category.bookmarks && category.bookmarks.length > 0) {
                            category.bookmarks.forEach(bookmark => {
                                const listItem = document.createElement('li');
                                listItem.className = 'ml-2 py-1';

                                const link = document.createElement('a');
                                link.href = bookmark.url;
                                link.textContent = bookmark.title;
                                link.target = '_blank';
                                link.rel = 'noopener noreferrer';
                                link.className = 'bookmark-link text-sm';
                                listItem.appendChild(link);

                                if (bookmark.description) {
                                    const description = document.createElement('p');
                                    description.className = 'text-xs mt-0.5 ml-px';
                                    description.style.color = 'var(--text-color-light)';
                                    description.style.transition = 'var(--theme-transition)';
                                    description.textContent = bookmark.description;
                                    listItem.appendChild(description);
                                }
                                bookmarkList.appendChild(listItem);
                            });
                        } else {
                            const noBookmarksMessage = document.createElement('p');
                            noBookmarksMessage.className = 'text-xs ml-2';
                            noBookmarksMessage.style.color = 'var(--text-color-light)';
                            noBookmarksMessage.style.transition = 'var(--theme-transition)';
                            noBookmarksMessage.textContent = 'No links in this category yet.';
                            bookmarkList.appendChild(noBookmarksMessage);
                        }
                        categoryDiv.appendChild(bookmarkList);
                        bookmarksSection.appendChild(categoryDiv);
                    });
                } else {
                    messageArea = document.getElementById('message-area');
                    if (!messageArea) {
                        messageArea = document.createElement('div');
                        messageArea.id = 'message-area';
                        bookmarksSection.appendChild(messageArea);
                    }
                    messageArea.textContent = 'No categories found in JSON file.';
                    messageArea.className = 'text-center my-10 text-sm';
                    messageArea.style.color = 'var(--text-color-light)';
                }

            } catch (error) {
                console.error('Error loading links:', error);
                messageArea = document.getElementById('message-area');
                if (!messageArea) {
                    messageArea = document.createElement('div');
                    messageArea.id = 'message-area';
                    bookmarksSection.appendChild(messageArea);
                }
                messageArea.textContent = 'Could not load links. Make sure your JSON file exists and is valid.';
                messageArea.className = 'text-center text-red-500 my-10 text-sm';
            }
        }

        document.addEventListener('DOMContentLoaded', loadAndDisplayBookmarks);
    </script>

</body>

</html>